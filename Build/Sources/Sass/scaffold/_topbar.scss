//
// Topbar
// ======
//

//
// Variables
//
$topbar-bg: $scaffold-topbar-bg;
$topbar-color: $scaffold-topbar-color;
$topbar-height: $scaffold-topbar-height;
$topbar-workspace-bg: #6d860d;
$topbar-toolbar-bg: $scaffold-topbar-toolbar-bg;
$topbar-toolbar-color: $scaffold-topbar-toolbar-color;
$topbar-button-bg: $topbar-toolbar-bg;
$topbar-button-hover-bg: lighten($topbar-button-bg, 3%);
$topbar-button-active-bg: $scaffold-modulemenu-bg;
$topbar-button-width: 40px;
$toolbar-item-padding-vertical: 9px;
$toolbar-item-padding-horizontal: 15px;

//
// Component
//
.topbar {
    background-color: inherit;
    position: relative;
    height: $topbar-height;

    a {
        color: inherit;
        text-decoration: none;
    }
}

//
// Buttons
//
.topbar-button {
    color: $gray-100;
    position: absolute;
    top: 0;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    border: 0;
    background-color: $topbar-button-bg;
    height: $topbar-height;
    width: $topbar-button-width;
    outline: 0;

    &:focus,
    &:hover {
        background-color: $topbar-button-hover-bg;
    }

    &:focus-visible {
        box-shadow: inset 0 0 0 1px #000, inset 0 0 0 2px #fff;
    }

    &[disabled],
    &[disabled]:focus,
    &[disabled]:hover {
        background-color: $topbar-button-active-bg;
        cursor: not-allowed;
        opacity: .5;
    }

    &.topbar-button-modulemenu {
        inset-inline-start: 0;

        @include media-breakpoint-up('lg') {
            background-color: $topbar-button-active-bg;
        }
    }

    &.topbar-button-toolbar {
        inset-inline-end: $topbar-button-width;
    }

    &.topbar-button-search {
        inset-inline-end: 0;
    }
}

.scaffold-modulemenu-expanded {
    .topbar-button.topbar-button-modulemenu {
        background-color: $topbar-button-active-bg;
    }
}

.scaffold-toolbar-expanded {
    .topbar-button-toolbar {
        background-color: $topbar-button-active-bg;
    }
}

.topbar-button-toolbar,
.topbar-button-search {
    display: inline-flex;
}

@include media-breakpoint-up('lg') {
    .topbar-button-toolbar,
    .topbar-button-search {
        display: none;
    }
}

//
// Header
//
.topbar-header {
    padding-inline-start: $topbar-button-width;

    @include media-breakpoint-down('lg') {
        padding-inline-end: ($topbar-button-width) !important;
    }
}

.topbar-header-site {
    overflow: hidden;
    position: relative;
    max-width: 100%;
    height: $topbar-height;
    line-height: $topbar-height;
    padding-inline-start: 1em;
    padding-inline-end: 1em;
    white-space: nowrap;

    a {
        display: inline-block;
        outline: 0;
        padding-inline-start: .5rem;
        padding-inline-end: .5rem;
        margin-inline-start: -.5rem;

        &:hover {
            text-decoration: none;
        }

        &:focus-visible {
            box-shadow: inset 0 0 0 1px #000, inset 0 0 0 2px #fff;
        }
    }

    &:before,
    &:after {
        display: block;
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        width: 1em;
    }

    &:before {
        inset-inline-end: 0;
        background: $topbar-bg;
    }

    &:after {
        inset-inline-end: 1em;
        background: linear-gradient(to var(--typo3-position-end), transparentize($topbar-bg, 1) 0%, transparentize($topbar-bg, 0) 100%);
    }
}

.typo3-in-workspace {
    .topbar-header-site {
        background-color: $topbar-workspace-bg;

        &:before {
            background: $topbar-workspace-bg;
        }

        &:after {
            background: linear-gradient(to right, transparentize($topbar-workspace-bg, 1) 0%, transparentize($topbar-workspace-bg, 0) 100%);
        }
    }
}

.topbar-header-site-logo {
    height: $topbar-height;
    display: none;
    padding-inline-end: .5em;

    img {
        max-width: 180px;
        max-height: 35px;
        width: auto;
        object-fit: contain;
    }

    @media (min-width: 320px) {
        display: inline-block;
    }
}

.topbar-header-site-title {
    line-height: 1.2em;
    display: inline-block;
    vertical-align: middle;
}

.topbar-header-site-name {
    display: block;
}

.topbar-header-site-version {
    opacity: .5;
}
